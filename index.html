<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You, Always âœ¨</title>
<!-- Added 'Caveat' for a realistic handwritten look -->
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Great+Vibes&family=Crimson+Pro:ital,wght@0,300;0,400;1,300;1,400&display=swap" rel="stylesheet">

<style>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   RESET & ROOT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --wine:    #3E0B14;
  --burgundy:#5C1120;
  --crimson: #7B1828;
  --rose:    #B03040;
  --blush:   #D4828C;
  --ivory:   #FAF3E8;
  --cream:   #F0E2C8;
  --parchment:#E2CFA0;
  --gold:    #B8913C;
  --gold-lt: #CCA850;
  --sand:    #D9C998;
  --dark:    #1A0608;
  --ink:     #2A0810;

  --ease-out-expo: cubic-bezier(0.16,1,0.3,1);
  --ease-in-out-soft: cubic-bezier(0.45,0,0.15,1);
}

html,body{
  width:100%;height:100%;
  overflow:hidden;
  font-family:'Crimson Pro',Georgia,serif;
  color:var(--ink);
  background:var(--wine);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GRAIN TEXTURE OVERLAY (global)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::after{
  content:'';position:fixed;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23g)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events:none;z-index:9998;opacity:.6;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PARTICLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#ambient-bg {
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(200, 160, 100, 0.12) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(180, 80, 120, 0.12) 0%, transparent 50%);
  filter: blur(40px);
  animation: auraShift 15s ease-in-out infinite alternate;
}
@keyframes auraShift {
  0% { transform: scale(1); opacity: 0.6; }
  100% { transform: scale(1.1) translate(20px, -20px); opacity: 1; }
}

#magical-dust {
  position:fixed; inset:0; pointer-events:none; z-index:1; overflow:hidden;
}
.dust {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,220,180,0.4) 40%, transparent 80%);
  box-shadow: 0 0 8px rgba(255,220,150,0.4);
  animation: dustDrift linear infinite;
  opacity: 0;
}
@keyframes dustDrift {
  0% { transform: translateY(110vh) scale(0); opacity: 0; }
  10% { opacity: var(--max-opacity, 0.6); transform: translateY(90vh) scale(1); }
  90% { opacity: var(--max-opacity, 0.6); transform: translateY(-5vh) scale(1); }
  100% { transform: translateY(-20vh) scale(0.5); opacity: 0; }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PROGRESS LINE + DOT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#progress-track{
  position:fixed;top:0;left:0;right:0;height:2px;
  background:rgba(255,255,255,.1);z-index:9999;
}
#progress-fill{
  height:100%;background:linear-gradient(90deg,var(--gold),var(--gold-lt));
  transition:width .7s var(--ease-out-expo);
  position:relative;
}
#progress-fill::after{
  content:'';position:absolute;right:-5px;top:-4px;
  width:10px;height:10px;border-radius:50%;
  background:var(--gold-lt);
  box-shadow:0 0 8px 3px rgba(200,168,80,.6);
  transition:opacity .3s;
}

/* Slide counter */
#counter{
  position:fixed;top:16px;right:20px;
  font-family:'Cormorant Garamond',serif;
  font-size:.8rem;letter-spacing:.15em;font-weight:400;
  color:rgba(255,255,255,.35);
  z-index:9999;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CUSTOM TOAST ALERTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#custom-toast {
  position: fixed;
  top: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(-100px);
  background: var(--burgundy);
  color: var(--ivory);
  padding: 14px 28px;
  border-radius: 30px;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.2rem;
  letter-spacing: 0.05em;
  z-index: 10000;
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  transition: transform 0.4s var(--ease-out-expo);
  pointer-events: none;
}
#custom-toast.show {
  transform: translateX(-50%) translateY(0);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDES â€” base
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slide{
  position:fixed;inset:0;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:clamp(1rem,4vw,2rem);
  overflow:hidden;
  opacity:0;pointer-events:none;
  transition:opacity .65s var(--ease-out-expo),transform .65s var(--ease-out-expo);
  transform:translateY(18px) scale(.98);
}
.slide.active{
  opacity:1;pointer-events:all;
  transform:translateY(0) scale(1);
}
.slide.exit{
  opacity:0;
  transform:translateY(-14px) scale(.97);
  transition:opacity .4s var(--ease-in-out-soft),transform .4s var(--ease-in-out-soft);
  pointer-events:none;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   STAGGER CHILDREN on slide enter
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slide .stagger{
  opacity:0;transform:translateY(22px);
  transition:opacity .6s var(--ease-out-expo), transform .6s var(--ease-out-expo);
}
.slide.active .stagger{opacity:1;transform:translateY(0)}
.slide.active .stagger:nth-child(1){transition-delay:.1s}
.slide.active .stagger:nth-child(2){transition-delay:.22s}
.slide.active .stagger:nth-child(3){transition-delay:.34s}
.slide.active .stagger:nth-child(4){transition-delay:.46s}
.slide.active .stagger:nth-child(5){transition-delay:.58s}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BUTTONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn{
  display:inline-flex;align-items:center;gap:.5rem;
  padding:.6rem 1.8rem;
  border-radius:4px;
  font-family:'Cormorant Garamond',serif;
  font-size:1.05rem;font-weight:500;letter-spacing:.04em;
  cursor:pointer;text-decoration:none;
  border:1.5px solid currentColor;
  background:transparent;
  position:relative;overflow:hidden;
  transition:color .35s ease, transform .2s ease, box-shadow .2s ease;
}
.btn .label{position:relative;z-index:1}
.btn::before{
  content:'';position:absolute;inset:0;
  background:currentColor;
  transform:scaleX(0);transform-origin:left center;
  transition:transform .38s var(--ease-out-expo);
  z-index:0;
}
.btn:hover::before{transform:scaleX(1)}
.btn:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,0,0,.25)}
.btn:active{transform:translateY(0) scale(.98)}

.btn-light{color:var(--ivory)}
.btn-light:hover{color:var(--burgundy);border-color:var(--ivory)}
.btn-light::before{background:var(--ivory)}

.btn-parchment{color:var(--burgundy);background:var(--cream);border-color:var(--burgundy)}
.btn-parchment:hover{color:var(--ivory)}
.btn-parchment::before{background:var(--burgundy)}

.btn-row{display:flex;gap:.7rem;flex-wrap:wrap;justify-content:center;margin-top:1.8rem}

.back-btn{
  position:absolute;bottom:1.6rem;left:1.6rem;
  font-family:'Cormorant Garamond',serif;
  font-size:.85rem;letter-spacing:.08em;
  color:inherit;opacity:.5;background:none;border:none;
  cursor:pointer;transition:opacity .2s;
  display:flex;align-items:center;gap:.35rem;
}
.back-btn:hover{opacity:1}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CARD BASE & HANDWRITING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card{
  border-radius:10px;position:relative;z-index:2;
  box-shadow:
    0 2px 4px rgba(0,0,0,.12),
    0 8px 24px rgba(0,0,0,.18),
    0 24px 64px rgba(0,0,0,.28),
    inset 0 1px 0 rgba(255,255,255,.15);
}

.handwritten {
  font-family: 'Caveat', cursive;
  font-size: 1.45rem;
  line-height: 1.2;
  color: #2a2a2a;
}

.tape {
  position: absolute;
  top: -10px;
  left: 50%;
  width: 60px;
  height: 22px;
  background: rgba(255, 255, 255, 0.4);
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  backdrop-filter: blur(2px);
  z-index: 5;
  pointer-events: none;
}
.tape-1 { transform: translateX(-50%) rotate(-3deg); }
.tape-2 { transform: translateX(-50%) rotate(2deg); background: rgba(240, 230, 220, 0.5); }
.tape-3 { transform: translateX(-50%) rotate(-1deg); width: 70px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   DECORATIVE AMBIENT FLOAT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.float{animation:gentleFloat ease-in-out infinite}
@keyframes gentleFloat{
  0%,100%{transform:translateY(0) rotate(var(--r,0deg))}
  50%    {transform:translateY(-12px) rotate(calc(var(--r,0deg) + 2deg))}
}

@keyframes pulseGlow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; text-shadow: 0 0 10px rgba(180, 40, 60, 0.4); }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 1 â€” HERO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s1{
  background:
    radial-gradient(ellipse 80% 60% at 50% 60%,rgba(107,22,40,.9) 0%,var(--wine) 70%),
    radial-gradient(ellipse at 15% 80%,rgba(90,18,32,.7) 0%,transparent 50%);
  background-color:var(--wine);
}
#s1::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse 100% 100% at 50% 50%,transparent 40%,rgba(15,3,6,.6) 100%);
  z-index:1;
}

.envelope-outer{
  position:relative;
  width:clamp(220px,36vw,320px);
  height:clamp(150px,24vw,220px);
  cursor:pointer;
  perspective:1200px;
  animation:gentleFloat 4s ease-in-out infinite;
  margin-bottom:clamp(.8rem,2vw,1.6rem);
  z-index:2;
}
.envelope-outer:hover{
  animation-play-state:paused;
  filter:drop-shadow(0 20px 38px rgba(0,0,0,.45));
}
.env-back{
  position:absolute;inset:0;
  background:linear-gradient(160deg, var(--crimson) 0%, var(--wine) 100%);
  border-radius:10px;
  z-index:0;
  box-shadow:0 10px 32px rgba(0,0,0,.3);
}
.env-card{
  position:absolute;
  bottom:8px; left:5%; width:90%; height:82%;
  background:linear-gradient(135deg, var(--ivory) 0%, var(--cream) 50%, var(--parchment) 100%);
  border-radius:8px;
  z-index:2;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;gap:.6rem;
  transition:transform .5s ease;
  box-shadow:0 2px 10px rgba(0,0,0,.15);
  overflow:hidden;
}
.env-card::after{
  content:'';position:absolute;inset:0;
  background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events:none;
}
.env-card-text{
  font-family:'Caveat',cursive;
  font-size:clamp(1.4rem,3vw,1.8rem);
  color:var(--crimson);
  text-align:center;line-height:1.2;
  position:relative;z-index:1;
  transform: rotate(-3deg);
}
.env-front{
  position:absolute;inset:0;
  z-index:3; pointer-events:none;
  clip-path:inset(0 round 10px);
  -webkit-clip-path:inset(0 round 10px);
}
.fold-left{
  position:absolute;inset:0;
  background:linear-gradient(to right, #8B2535, #6B1828);
  clip-path:polygon(0 0, 0 100%, 51% 55%);
}
.fold-right{
  position:absolute;inset:0;
  background:linear-gradient(to left, #72181F, #5C1018);
  clip-path:polygon(100% 0, 100% 100%, 49% 55%);
}
.fold-bottom{
  position:absolute;inset:0;
  background:linear-gradient(to top, var(--wine), var(--crimson));
  clip-path:polygon(0 100%, 100% 100%, 50% 54%);
  z-index:4;
}
.env-flap-container{
  position:absolute;inset:0;
  transform-origin:top; transform-style:preserve-3d;
  transition:transform .6s .3s ease-in-out, z-index 0s .4s;
  z-index:5;
}
.env-flap-wrap{
  position:absolute;inset:0;
  clip-path:inset(0 round 10px 10px 0 0);
  -webkit-clip-path:inset(0 round 10px 10px 0 0);
  backface-visibility:hidden; -webkit-backface-visibility:hidden;
}
.env-flap-inside-wrap{ transform:rotateY(180deg); }
.env-flap-face{
  width:100%;height:100%;
  background:linear-gradient(175deg, var(--rose) 0%, var(--crimson) 55%, var(--wine) 100%);
  clip-path:polygon(0 0, 100% 0, 50% 65%);
  display:flex;justify-content:center;
}
.env-flap-inner{
  width:100%;height:100%;
  background:linear-gradient(to bottom, #7B2030, #5C1120);
  clip-path:polygon(0 0, 100% 0, 50% 65%);
}
.seal-wrap{
  position:absolute; top:58%; transform:translateY(-50%);
  transition:opacity .3s ease, transform .3s ease; z-index:1;
}
.seal{
  position:relative; width:22px;height:22px;
  background:linear-gradient(45deg, var(--gold), var(--gold-lt));
  transform:rotate(-45deg);
}
.seal::before,.seal::after{
  content:'';position:absolute;
  width:22px;height:22px;
  background:inherit;border-radius:50%;
}
.seal::before{top:-11px;left:0}
.seal::after{top:0;left:11px}
.envelope-outer:hover .env-flap-container{
  transform:rotateX(180deg); z-index:1;
  transition:transform .6s ease-in-out, z-index 0s .2s;
}
.envelope-outer:hover .seal-wrap{ opacity:0; transform:translateY(-50%) scale(0); }
.envelope-outer:hover .env-card{
  transform:translateY(-88px);
  transition:transform .5s .3s cubic-bezier(.175,.885,.32,1.275);
}

.hero-title{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2.6rem,6.5vw,5rem);
  color:var(--ivory);
  text-align:center;
  text-shadow:0 2px 20px rgba(0,0,0,.35),0 0 60px rgba(180,80,80,.2);
  line-height:1.1;
  position:relative;z-index:2;
}
.hero-sub{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(.95rem,2.2vw,1.3rem);
  font-weight:300;font-style:italic;
  color:rgba(242,226,200,.7);
  text-align:center;
  letter-spacing:.04em;
  margin-top:.5rem;
  position:relative;z-index:2;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 2 â€” LETTER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s2{
  background:radial-gradient(ellipse 90% 80% at 50% 40%,rgba(58,10,18,.95) 0%,rgba(20,4,8,1) 100%);
}
#s2::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse 60% 50% at 50% 45%,rgba(100,20,30,.3) 0%,transparent 70%);
}

.letter-card{
  background:linear-gradient(155deg,#F8EDD6 0%,#F2E0B8 40%,#EDD4A5 100%);
  border-radius:10px;
  padding:clamp(1.6rem,4vw,2.8rem) clamp(1.6rem,4vw,3rem);
  max-width:800px;width:100%;
  position:relative;overflow:hidden;
  outline:8px solid transparent; outline-offset:-8px;
}
.letter-card::before{
  content:'';position:absolute;inset:0;border-radius:10px;pointer-events:none;
  border:7px solid transparent;
  border-image:repeating-linear-gradient(
    -45deg,
    var(--burgundy) 0px,var(--burgundy) 8px,
    var(--cream)    8px,var(--cream)    16px
  ) 7;
}
.letter-card::after{
  content:'';position:absolute;inset:0;border-radius:10px;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.55' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
  opacity:.5;
}
.letter-inner{display:grid;grid-template-columns:1fr 200px;gap:2.5rem;align-items:start;position:relative;z-index:1}
.letter-heading{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2rem,4.5vw,3.5rem);
  color:var(--crimson);
  line-height:1.15;
  margin-bottom:1.2rem;
}
.letter-body{
  font-family:'Crimson Pro',Georgia,serif;
  font-style:italic;
  font-size:clamp(1rem,1.9vw,1.2rem);
  line-height:2.0;
  color:rgba(30,6,10,.8);
}
.letter-body em{font-style:normal;font-weight:400;color:var(--crimson)}
.photo-slot{
  width:100%;aspect-ratio:.72;
  background:linear-gradient(135deg,#C4949C,#9A6070,#B48090);
  border:4px solid rgba(255,255,255,.95);
  border-radius:3px;
  box-shadow:
    3px 3px 0 var(--parchment),
    5px 5px 0 rgba(139,40,60,.25),
    8px 8px 20px rgba(0,0,0,.25);
  transform:rotate(3.5deg);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;padding:1.5rem;
  transition:transform .4s var(--ease-out-expo),box-shadow .4s ease;
  overflow:hidden;
  position:relative;
}
.photo-slot:hover{transform:rotate(0deg) scale(1.03);box-shadow:6px 6px 30px rgba(0,0,0,.3)}
.photo-slot img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;}
.kiss-mark{
  position:absolute;bottom:-18px;right:24px;
  font-size:2.4rem;transform:rotate(-20deg);
  filter:drop-shadow(0 2px 6px rgba(0,0,0,.3));
  z-index:2;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 3 â€” MAKE A WISH (3D CAKE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s3{
  background:
    linear-gradient(135deg, rgba(242,216,220,.95), rgba(230,190,198,.95)),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.35' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.5'/%3E%3C/svg%3E");
  background-color:#E6BEC6;
}
#s3::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background-image:
    repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(180,90,110,.05) 3px,rgba(180,90,110,.05) 4px),
    repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(180,90,110,.05) 3px,rgba(180,90,110,.05) 4px);
}
.wish-card{
  background:rgba(253,245,245,.92);
  backdrop-filter:blur(4px);
  border-radius:10px;
  border:1.5px solid rgba(220,150,165,.4);
  padding:clamp(1.6rem,4vw,2.8rem);
  max-width:760px;width:100%;
  display:grid;grid-template-columns:240px 1fr;gap:3rem;
  align-items:center;
  box-shadow:
    0 2px 4px rgba(0,0,0,.04),
    0 12px 32px rgba(180,90,110,.15),
    0 32px 80px rgba(180,90,110,.2),
    inset 0 1px 0 rgba(255,255,255,1);
}

.cake-col { display:flex; flex-direction:column; align-items:center; gap:0.6rem; margin-top: 1rem; }

/* â”€â”€ Realistic 3D Isometric Cake â”€â”€ */
.cake-3d-wrap {
  position: relative;
  width: 240px;
  height: 240px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  animation: cakeBreathe 4s ease-in-out infinite;
  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 2;
  margin-bottom: 10px;
}
.cake-3d-wrap:hover {
  transform: scale(1.05) translateY(-5px);
}

.cake-shadow {
  position: absolute;
  bottom: 10px;
  width: 200px;
  height: 25px;
  background: rgba(90, 20, 30, 0.3);
  border-radius: 50%;
  filter: blur(8px);
  z-index: 0;
}

.c3d-plate {
  position: absolute;
  bottom: 18px;
  width: 220px;
  height: 60px;
  background: linear-gradient(to bottom, #fdfdfd, #d4d4d4);
  border-radius: 50%;
  box-shadow:
    0 15px 25px rgba(0,0,0,0.12),
    inset 0 -4px 8px rgba(0,0,0,0.1),
    inset 0 4px 10px rgba(255,255,255,1);
  z-index: 1;
}
.c3d-plate::after {
  content: ''; position: absolute;
  inset: 6px; border-radius: 50%;
  border: 1px solid rgba(0,0,0,0.04);
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
}

.c3d-tier-base {
  position: absolute;
  bottom: 45px;
  width: 160px;
  height: 60px;
  background: linear-gradient(to right, #b45b6f 0%, #e68fa3 15%, #e68fa3 85%, #a0495d 100%);
  z-index: 2;
}
.c3d-tier-base::before { /* Base bottom curve */
  content: ''; position: absolute;
  bottom: -25px; left: 0; right: 0; height: 50px;
  background: linear-gradient(to right, #b45b6f 0%, #e68fa3 15%, #e68fa3 85%, #a0495d 100%);
  border-radius: 50%;
  box-shadow: inset 0 -10px 15px rgba(0,0,0,0.15);
  z-index: -1;
}
.c3d-tier-base::after { /* Base top surface */
  content: ''; position: absolute;
  top: -25px; left: 0; right: 0; height: 50px;
  background: linear-gradient(to bottom right, #f2a6b8 0%, #e68fa3 100%);
  border-radius: 50%;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
  z-index: 1;
}

.c3d-tier-top {
  position: absolute;
  bottom: 120px;
  width: 110px;
  height: 45px;
  background: linear-gradient(to right, #cba26b 0%, #fae2b6 15%, #fae2b6 85%, #b58d55 100%);
  z-index: 3;
  box-shadow: 0 10px 15px rgba(0,0,0,0.15);
}
.c3d-tier-top::before { /* Top tier bottom curve */
  content: ''; position: absolute;
  bottom: -15px; left: 0; right: 0; height: 30px;
  background: linear-gradient(to right, #cba26b 0%, #fae2b6 15%, #fae2b6 85%, #b58d55 100%);
  border-radius: 50%;
  box-shadow: inset 0 -8px 10px rgba(0,0,0,0.1);
  z-index: -1;
}
.c3d-tier-top::after { /* Top tier top surface */
  content: ''; position: absolute;
  top: -15px; left: 0; right: 0; height: 30px;
  background: #fdf2d8;
  background-image: radial-gradient(circle at 50% 50%, rgba(255, 200, 50, 0.4) 0%, transparent 70%);
  border-radius: 50%;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
  z-index: 1;
}

.c3d-frosting {
  position: absolute;
  top: -16px; left: -2px; right: -2px; height: 32px;
  background: linear-gradient(to bottom, #ffffff, #fdfbf7);
  border-radius: 50%;
  box-shadow:
    inset 0 -2px 5px rgba(0,0,0,0.05),
    inset 0 4px 10px rgba(255,255,255,1),
    0 4px 8px rgba(0,0,0,0.08);
  z-index: 4;
  background-image: radial-gradient(circle at 50% 50%, rgba(255, 200, 50, 0.35) 0%, transparent 60%);
}

.c3d-drips {
  position: absolute;
  top: 5px; left: 0; right: 0; height: 100%;
  z-index: 4;
  pointer-events: none;
}
.c3d-drip {
  position: absolute;
  background: #fdfbf7;
  border-radius: 20px;
  box-shadow:
    inset -3px -3px 6px rgba(0,0,0,0.05),
    inset 2px 2px 5px rgba(255,255,255,0.9),
    2px 5px 6px rgba(0,0,0,0.1);
}
.c3d-drip:nth-child(1) { left: 6px; top: 0; width: 14px; height: 35px; }
.c3d-drip:nth-child(2) { left: 24px; top: 6px; width: 16px; height: 48px; }
.c3d-drip:nth-child(3) { left: 45px; top: 8px; width: 14px; height: 25px; }
.c3d-drip:nth-child(4) { left: 65px; top: 7px; width: 18px; height: 50px; }
.c3d-drip:nth-child(5) { left: 88px; top: 2px; width: 14px; height: 32px; }

.c3d-candle {
  position: absolute;
  bottom: 172px;
  left: 50%;
  transform: translateX(-50%);
  width: 14px;
  height: 45px;
  /* Anti-aliased stripes for perfectly smooth diagonal lines */
  background: repeating-linear-gradient(
    -45deg,
    #fbfbfb 0px, #fbfbfb 5.5px,
    #e28a9d 6.5px, #e28a9d 11.5px,
    #fbfbfb 12.5px
  );
  border-radius: 3px;
  box-shadow:
    inset -4px 0 6px rgba(0,0,0,0.2),
    inset 4px 0 6px rgba(255,255,255,0.7),
    2px 4px 6px rgba(0,0,0,0.15);
  z-index: 5;
}
.c3d-candle::before {
  content: ''; position: absolute;
  top: -6px; left: 50%; transform: translateX(-50%);
  width: 3px; height: 6px;
  background: linear-gradient(to right, #444, #111, #444);
  border-radius: 2px;
}
.c3d-candle::after {
  content: ''; position: absolute;
  top: -2px; left: 0; right: 0; height: 4px;
  background: #fdfdfd;
  border-radius: 50%;
  box-shadow: inset 0 -1px 2px rgba(0,0,0,0.2);
}

.c3d-flame {
  position: absolute;
  bottom: 215px; /* Snapped exactly to the wick */
  left: 50%;
  transform: translateX(-50%);
  width: 18px;
  height: 32px;
  background: radial-gradient(100% 140% at 50% 100%,
    rgba(255,255,255,1) 0%,
    rgba(255,235,59,1) 25%,
    rgba(255,152,0,0.8) 60%,
    transparent 90%);
  border-radius: 50% 50% 30% 30% / 60% 60% 40% 40%;
  box-shadow:
    0 0 15px 5px rgba(255, 170, 0, 0.6),
    0 0 35px 12px rgba(255, 100, 0, 0.4),
    0 -10px 20px 5px rgba(255, 200, 50, 0.4);
  /* Added a sub-pixel blur to smooth out the jagged vector edge of the CSS shape */
  filter: blur(0.8px);
  animation: flameFlicker3D 0.15s ease-in-out infinite alternate;
  z-index: 6;
  transform-origin: bottom center;
  transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
}
.c3d-flame.out {
  opacity: 0;
  transform: translateX(-50%) scale(0) rotate(15deg);
  box-shadow: none;
}

.c3d-smoke {
  position: absolute;
  bottom: 230px;
  left: 50%;
  transform: translateX(-50%);
  width: 12px; height: 12px;
  background: rgba(220, 220, 220, 0.8);
  border-radius: 50%;
  filter: blur(5px);
  opacity: 0;
  z-index: 7;
  pointer-events: none;
}
.c3d-smoke.active {
  animation: smokeRise3D 2.5s ease-out forwards;
}

/* Smoother flicker */
@keyframes flameFlicker3D {
  0% { transform: translateX(-50%) scale(1) rotate(-1deg); }
  50% { transform: translateX(-51%) scale(1.02) rotate(1deg); }
  100% { transform: translateX(-49%) scale(0.98) rotate(2deg); }
}
@keyframes smokeRise3D {
  0% { opacity: 1; transform: translateX(-50%) scale(1) translateY(0); filter: blur(3px); }
  40% { opacity: 0.6; transform: translateX(-70%) scale(3) translateY(-40px); filter: blur(8px); }
  100% { opacity: 0; transform: translateX(-10%) scale(6) translateY(-90px); filter: blur(15px); }
}
@keyframes cakeBreathe {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-4px) scale(1.01); }
}

.wish-heading{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2rem,4vw,3.2rem);
  color:var(--crimson);margin-bottom:.8rem;
}
.wish-body{
  font-family:'Crimson Pro',serif;
  font-size:clamp(.95rem,1.8vw,1.15rem);
  font-style:italic;
  line-height:2.1;color:rgba(40,8,14,.75);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 4 â€” POLAROIDS (Dark & Dramatic)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s4{
  background:
    radial-gradient(ellipse at 50% 40%, rgba(92,17,32,.95) 0%, rgba(62,11,20,1) 100%),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.35' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.5'/%3E%3C/svg%3E");
  background-color: var(--wine);
  gap:2.5rem;
}
#s4::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(circle at 50% 50%, rgba(255,200,150,.06) 0%, transparent 65%);
}
#s4 .section-title{
  color:var(--ivory);
  text-shadow:0 4px 16px rgba(0,0,0,.6);
}
#s4 .section-title .rule::before,
#s4 .section-title .rule::after{
  background:linear-gradient(90deg,transparent,var(--ivory));
  opacity:.4;
}
#s4 .btn-parchment {
  color: var(--ivory);
  background: transparent;
  border-color: rgba(255,255,255,0.4);
}
#s4 .btn-parchment::before {
  background: rgba(255,255,255,0.1);
}
#s4 .btn-parchment:hover {
  border-color: var(--ivory);
  color: var(--ivory);
}
#s4 .back-btn {
  color: rgba(255,255,255,0.6);
}
#s4 .back-btn:hover {
  color: rgba(255,255,255,1);
}

.section-title{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2rem,4.5vw,3.2rem);
  color:var(--crimson);
  text-align:center;
  position:relative;z-index:2;
  text-shadow:0 2px 12px rgba(120,20,35,.15);
}
.section-title .rule{
  display:flex;align-items:center;gap:1rem;justify-content:center;
}
.section-title .rule::before,.section-title .rule::after{
  content:'';flex:1;max-width:80px;height:1px;
  background:linear-gradient(90deg,transparent,var(--crimson));
  opacity:.5;
}
.section-title .rule::after{transform:scaleX(-1)}

.polaroid-row{
  display:flex;gap:1.6rem;flex-wrap:wrap;
  justify-content:center;position:relative;z-index:2;
}
.polaroid{
  background:white;
  padding:12px 12px 20px; /* Reduced fixed bottom padding so long text dictates the height naturally */
  border-radius:2px;
  width: 220px; /* Made the polaroids wider to comfortably fit long text */
  display: flex;
  flex-direction: column;
  box-shadow:
    0 2px 4px rgba(0,0,0,.12),
    0 8px 20px rgba(0,0,0,.18),
    0 20px 48px rgba(0,0,0,.14);
  transition:transform .4s var(--ease-out-expo),box-shadow .4s ease;
  cursor:default;
  position:relative;
}
.polaroid:nth-child(1){transform:rotate(-4.5deg)}
.polaroid:nth-child(2){transform:rotate(2deg);margin-top:12px}
.polaroid:nth-child(3){transform:rotate(-1.5deg);margin-top:-8px}
.polaroid:hover{
  transform:rotate(0deg) scale(1.05) translateY(-6px) !important;
  z-index:10;
  box-shadow:0 4px 8px rgba(0,0,0,.15),0 16px 40px rgba(0,0,0,.25),0 32px 80px rgba(0,0,0,.2);
}
.pol-img{
  width:100%;
  aspect-ratio: 1.1; /* Perfectly frames the image in a classic polaroid ratio */
  height:auto;
  overflow:hidden;
  position:relative;
}
.pol-img::after{
  content:'';position:absolute;inset:0;
  background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E");
  pointer-events:none;
}
.pol-img-inner{
  width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
  color:rgba(255,255,255,.9);
  text-align:center; padding: 1rem;
}
.pol-img-inner img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;}

.pol-cap{
  text-align:center;
  margin-top:14px;
  color:#2a2a2a;
  line-height:1.25;
  font-size: 1.3rem; /* Perfectly sized for multi-line paragraphs */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 5 â€” CURTAIN REVEAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s5{
  background:radial-gradient(ellipse at 50% 50%,rgba(60,6,14,.9),#0E0204);
  cursor:pointer;
}
#s5::after{
  content:'';position:absolute;top:0;left:0;right:0;height:14px;
  background:linear-gradient(180deg,#B08030,#D4A848,#A07020);
  z-index:10;pointer-events:none;
  box-shadow:0 4px 16px rgba(0,0,0,.5);
}
.curt{
  position:absolute;top:0;width:54%;height:100%;
  transition:transform 1.1s cubic-bezier(.4,0,.05,1);
  z-index:3;
}
.curt-l{left:0}
.curt-r{right:0}
.curt::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(180deg,
    rgba(140,0,25,1) 0%, rgba(175,20,40,1) 15%,
    rgba(130,0,20,1) 35%, rgba(160,15,35,1) 55%,
    rgba(120,0,15,1) 75%, rgba(90,0,10,1) 100%
  );
}
.curt::after{
  content:'';position:absolute;inset:0;
  background:repeating-linear-gradient(
    90deg,
    rgba(0,0,0,.18) 0px,rgba(0,0,0,.18) 2px,
    transparent 2px,transparent 16px,
    rgba(255,255,255,.04) 16px,rgba(255,255,255,.04) 18px,
    transparent 18px,transparent 34px,
    rgba(0,0,0,.12) 34px,rgba(0,0,0,.12) 36px,
    transparent 36px,transparent 56px
  );
}
.curt-r::after{transform:scaleX(-1)}
#s5.open .curt-l{transform:translateX(-90%)}
#s5.open .curt-r{transform:translateX(90%)}

.curt-stage{position:relative;z-index:2;text-align:center}
.curt-frame{
  width:clamp(240px,42vw,400px);aspect-ratio:1.45;
  background:linear-gradient(135deg,#6080A0,#405060);
  border:3px solid rgba(255,255,255,.15);
  border-radius:4px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  margin:0 auto;
  color:rgba(255,255,255,.9);
  text-align:center;padding:1.5rem;
  overflow:hidden;
  position:relative;
}
.curt-frame img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.curt-reveal-text{
  font-family:'Great Vibes',cursive;
  font-size:clamp(1.6rem,3.5vw,2.4rem);
  color:var(--cream);
  margin-top:1.2rem;
  opacity:0;transform:translateY(16px);
  transition:opacity .9s var(--ease-out-expo) .5s,transform .9s var(--ease-out-expo) .5s;
  text-shadow:0 0 30px rgba(200,160,80,.3);
}
.curt-btns{
  margin-top:1rem;
  opacity:0;transform:translateY(14px);
  transition:opacity .8s ease .85s,transform .8s var(--ease-out-expo) .85s;
}
#s5.open .curt-reveal-text, #s5.open .curt-btns{opacity:1;transform:translateY(0)}

.click-prompt{
  position:absolute;bottom:2.2rem;
  font-family:'Cormorant Garamond',serif;
  font-size:1rem;font-style:italic;letter-spacing:.1em;
  color:rgba(255,255,255,.45);
  z-index:5;pointer-events:none;
  animation:breathe 2.5s ease-in-out infinite;
}
#s5.open .click-prompt{display:none}
@keyframes breathe{0%,100%{opacity:.35}50%{opacity:.7}}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 6 â€” POSTCARD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s6{
  background:radial-gradient(ellipse 90% 80% at 50% 45%,#2A4C5C,#182830);
}
.postcard-scene{
  max-width:720px;width:100%;
  position:relative;z-index:2;
}
.scene-img{
  width:100%;aspect-ratio:1.75;
  background:linear-gradient(180deg,#8BB0C8 0%,#C8E0F0 35%,#B0CBE0 55%,#8898A8 80%,#686878 100%);
  border-radius:8px 8px 0 0;
  position:relative;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
  border:2px solid rgba(255,255,255,.12);
  border-bottom:none;
}
.scene-ph-text{
  color:rgba(255,255,255,.85);
  text-align:center;padding:1.5rem;
  line-height: 1.3;
}
.scene-img img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.scene-img::after{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse at 50% 50%,transparent 40%,rgba(20,40,60,.35) 100%);
  pointer-events:none;
}
.postcard-note{
  position:absolute;
  bottom:-28px;right:-18px;
  width:48%;
  background:linear-gradient(145deg,#FBF0D8,#F2E0B5);
  border-radius:6px;
  padding:1.2rem 1.3rem 1.1rem;
  border:1px solid rgba(185,145,55,.4);
  box-shadow:
    0 4px 12px rgba(0,0,0,.2),
    0 16px 40px rgba(0,0,0,.3),
    inset 0 1px 0 rgba(255,255,255,.6);
  transform:rotate(3.5deg);
  transition:transform .4s var(--ease-out-expo);
}
.postcard-note:hover{transform:rotate(1deg) scale(1.02)}
.pc-stamp-box{
  position:absolute;top:-16px;right:10px;
  background:white;padding:5px 6px;
  border:1.5px solid #DDD;
  box-shadow:2px 2px 8px rgba(0,0,0,.18);
  transform:rotate(-4deg);
  font-size:1.5rem;line-height:1;
}
.pc-heading{
  font-family:'Cormorant Garamond',serif;
  font-size:.78rem;letter-spacing:.25em;font-weight:500;
  color:var(--burgundy);text-align:center;
  border-bottom:1px solid rgba(185,145,55,.35);
  padding-bottom:.4rem;margin-bottom:.65rem;
  text-transform:uppercase;
}
.pc-text{
  font-family:'Crimson Pro',serif;font-style:italic;
  font-size:.85rem;line-height:1.75;
  color:rgba(40,8,14,.8);
  border-left:2px solid rgba(150,40,60,.3);
  padding-left:.7rem;
  margin-bottom:.8rem;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 7 â€” LETTER PAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s7{
  background:radial-gradient(ellipse 90% 80% at 50% 40%, rgba(58,10,18,.95) 0%, rgba(20,4,8,1) 100%);
  padding:0;
  justify-content:flex-start;
  align-items:center;
  overflow:hidden;
}

/* The entire letter lives in a scrollable column */
.letter-page-wrap{
  position:relative;
  z-index:2;
  width:100%;
  height:100%;
  overflow-y:auto;
  overflow-x:hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:2.5rem 1.5rem 6rem;
  /* Custom scrollbar */
  scrollbar-width:thin;
  scrollbar-color:rgba(185,145,55,.35) transparent;
}
.letter-page-wrap::-webkit-scrollbar{width:4px}
.letter-page-wrap::-webkit-scrollbar-track{background:transparent}
.letter-page-wrap::-webkit-scrollbar-thumb{background:rgba(185,145,55,.35);border-radius:4px}

/* The paper itself */
.letter-paper{
  width:100%;
  max-width:680px;
  background:linear-gradient(175deg,#FBF4E4 0%,#F5E8CC 40%,#EED9AA 100%);
  border-radius:4px 4px 6px 6px;
  position:relative;
  box-shadow:
    0 2px 4px rgba(0,0,0,.1),
    0 8px 28px rgba(0,0,0,.25),
    0 32px 80px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.7);
  /* Parchment texture */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.45' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0.4'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E"),
    linear-gradient(175deg,#FBF4E4 0%,#F5E8CC 40%,#EED9AA 100%);
}

/* Torn / deckle top edge */
.letter-paper::before{
  content:'';
  position:absolute;
  top:-6px;left:0;right:0;height:12px;
  background:linear-gradient(175deg,#FBF4E4,#F5E8CC);
  clip-path:polygon(
    0% 100%, 2% 20%, 4% 80%, 6% 10%, 8% 70%, 10% 5%,
    12% 60%, 14% 15%, 16% 75%, 18% 25%, 20% 85%,
    22% 10%, 24% 65%, 26% 20%, 28% 80%, 30% 5%,
    32% 55%, 34% 15%, 36% 70%, 38% 20%, 40% 75%,
    42% 5%, 44% 60%, 46% 10%, 48% 65%, 50% 0%,
    52% 65%, 54% 10%, 56% 60%, 58% 5%, 60% 75%,
    62% 20%, 64% 70%, 66% 15%, 68% 55%, 70% 5%,
    72% 80%, 74% 20%, 76% 65%, 78% 10%, 80% 85%,
    82% 25%, 84% 75%, 86% 15%, 88% 60%, 90% 5%,
    92% 70%, 94% 15%, 96% 60%, 98% 10%, 100% 80%,
    100% 100%
  );
}

/* Airmail border stripes */
.letter-paper::after{
  content:'';position:absolute;inset:0;border-radius:4px;pointer-events:none;
  border:7px solid transparent;
  border-image:repeating-linear-gradient(
    -45deg,
    var(--burgundy) 0px,var(--burgundy) 8px,
    transparent    8px,transparent    16px
  ) 7;
  opacity:.45;
}

/* Red margin line */
.letter-margin{
  position:absolute;
  top:0;bottom:0;left:56px;
  width:1.5px;
  background:rgba(176,48,64,.25);
  pointer-events:none;
}

/* Ruled lines across full paper */
.letter-rules{
  position:absolute;
  inset:0;border-radius:4px;
  pointer-events:none;
  background-image:repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 31px,
    rgba(130,90,40,.12) 31px,
    rgba(130,90,40,.12) 32px
  );
  background-position:0 72px; /* start after header area */
}

/* Paper inner padding */
.letter-content{
  position:relative;
  z-index:1;
  padding:2.5rem 2.5rem 2.5rem 4rem;
}

/* â”€â”€ Letter header â”€â”€ */
.letter-header{
  text-align:center;
  padding-bottom:1.2rem;
  margin-bottom:1.5rem;
  border-bottom:1px solid rgba(130,90,40,.2);
  position:relative;
}
.letter-date{
  font-family:'Cormorant Garamond',serif;
  font-size:.8rem;letter-spacing:.18em;font-weight:400;
  color:rgba(80,30,40,.5);
  text-transform:uppercase;
  margin-bottom:.6rem;
}
.letter-heading-main{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2.2rem,5vw,3.4rem);
  color:var(--crimson);
  line-height:1;
  text-shadow:0 2px 12px rgba(120,20,35,.12);
}
.letter-sub-head{
  font-family:'Cormorant Garamond',serif;
  font-size:.88rem;font-style:italic;font-weight:300;
  color:rgba(80,30,40,.5);
  letter-spacing:.08em;
  margin-top:.3rem;
}
/* Corner ornament */
.letter-ornament{
  position:absolute;
  font-size:1.1rem;opacity:.3;
  top:.4rem;
}
.letter-ornament.lt{left:.5rem}
.letter-ornament.rt{right:.5rem}

/* â”€â”€ Salutation â”€â”€ */
.letter-salutation{
  font-family:'Great Vibes',cursive;
  font-size:1.8rem;
  color:var(--crimson);
  margin-bottom:.8rem;
  display:block;
}

/* â”€â”€ Sections â”€â”€ */
.letter-section{
  margin-bottom:1.8rem;
}
.letter-section-label{
  font-family:'Cormorant Garamond',serif;
  font-size:.72rem;letter-spacing:.22em;font-weight:500;
  text-transform:uppercase;
  color:rgba(130,40,55,.5);
  margin-bottom:.4rem;
  display:flex;align-items:center;gap:.5rem;
}
.letter-section-label::after{
  content:'';flex:1;height:1px;
  background:linear-gradient(90deg,rgba(130,40,55,.2),transparent);
}

/* The editable text area â€” looks like handwriting on lines */
.letter-field{
  width:100%;
  min-height:64px;
  font-family:'Crimson Pro',Georgia,serif;
  font-size:1.05rem;
  font-style:italic;
  line-height:2;
  color:rgba(30,8,12,.8);
  background:transparent;
  border:none;outline:none;
  resize:none;
  caret-color:var(--crimson);
  /* match the ruled line spacing */
  padding:0;
}
.letter-field::placeholder{
  color:rgba(130,90,60,.35);
  font-style:italic;
}
/* subtle focus glow */
.letter-field:focus{
  color:rgba(30,8,12,.92);
}

/* Divider between sections */
.letter-divider{
  display:flex;align-items:center;gap:.8rem;
  margin:1.2rem 0;
  opacity:.35;
}
.letter-divider::before,.letter-divider::after{
  content:'';flex:1;height:1px;
  background:linear-gradient(90deg,transparent,rgba(130,90,40,.6),transparent);
}
.letter-divider span{
  font-size:.8rem;color:rgba(130,90,40,.8);
}

/* â”€â”€ Closing â”€â”€ */
.letter-closing{
  margin-top:2rem;
}
.letter-sign-off{
  font-family:'Great Vibes',cursive;
  font-size:1.6rem;
  color:var(--crimson);
  display:block;
  margin-bottom:.5rem;
}
.letter-signature{
  font-family:'Great Vibes',cursive;
  font-size:2.2rem;
  color:var(--ink);
  min-width:140px;
  display:inline-block;
  border-bottom:1.5px solid rgba(130,90,40,.25);
  padding-bottom:.2rem;
  outline:none;
  caret-color:var(--crimson);
}

/* Ink blot / kiss mark decoration */
.letter-kiss{
  position:absolute;
  bottom:1.5rem;right:2rem;
  font-size:2rem;
  transform:rotate(-15deg);
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.15));
  opacity:.7;
}

/* â”€â”€ Sticky nav bar fixed at bottom of slide â”€â”€ */
.letter-nav{
  position:fixed;
  bottom:0;left:0;right:0;
  z-index:100;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:.8rem;
  padding:.9rem 1.5rem;
  background:linear-gradient(to top, rgba(20,4,8,1) 60%, transparent);
  pointer-events:none;
}
/* only show when s7 is active */
#s7:not(.active) .letter-nav{ display:none }
.letter-nav .btn,
.letter-nav .back-btn{
  pointer-events:all;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 8 â€” FILM STRIP / THANK YOU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s8{
  background:
    linear-gradient(rgba(248,240,224,.95),rgba(240,228,205,.95)),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.55' numOctaves='4'/%3E%3CfeColorMatrix type='saturate' values='0.3'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E");
  background-color:#F5EDD8;
  gap:2rem;
}
.film-strip{
  display:flex;
  background:#1C1C1C;
  border-radius:4px;
  position:relative;z-index:2;
  max-width:720px;width:100%;
  box-shadow:0 8px 30px rgba(0,0,0,.25),0 24px 60px rgba(0,0,0,.2);
  overflow:hidden;
}
.film-strip::before,.film-strip::after{
  content:'';
  position:absolute;left:0;right:0;height:16px;
  background:repeating-linear-gradient(
    90deg,
    #1C1C1C 0,#1C1C1C 10px,
    rgba(255,255,255,.08) 10px,rgba(255,255,255,.08) 22px,
    #1C1C1C 22px,#1C1C1C 30px
  );
  z-index:2;pointer-events:none;
}
.film-strip::before{top:0}
.film-strip::after{bottom:0}
.film-frames{display:flex;padding:20px 12px;gap:6px;flex:1;position:relative;z-index:1}
.film-frame{
  flex:1;min-width:160px;aspect-ratio:1;
  overflow:hidden;
  position:relative;border-radius:2px;
}
.film-frame::after{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,200,100,.06) 0%,transparent 50%,rgba(0,0,0,.12) 100%);
  pointer-events:none;
}
.film-ph{
  width:100%;height:100%;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  color:rgba(255,255,255,.8);
  text-align:center;padding:1rem;
}
.film-ph img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.9;filter:sepia(.2)}
.ty-headline{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2rem,5vw,3.6rem);
  color:var(--crimson);
  text-align:center;
  position:relative;z-index:2;
  text-shadow:0 2px 12px rgba(120,20,35,.15);
}
.ty-sub{
  font-family:'Cormorant Garamond',serif;
  font-size:1rem;font-style:italic;letter-spacing:.08em;
  color:rgba(100,30,40,.55);
  text-align:center;margin-top:.3rem;
  position:relative;z-index:2;
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE 9 â€” SCRATCH OFF GIFT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#s9 {
  background: radial-gradient(circle at 50% 50%, rgba(248,238,210,.95) 0%, rgba(226,207,160,.95) 100%);
  background-color: #D8C8A0;
}
#s9::before {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background-image: 
    repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(130,100,50,.06) 3px, rgba(130,100,50,.06) 4px),
    repeating-linear-gradient(90deg, transparent, transparent 3px, rgba(130,100,50,.06) 3px, rgba(130,100,50,.06) 4px);
}
.gift-title {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(2.5rem, 5vw, 4rem);
  color: var(--crimson);
  text-align: center;
  text-shadow: 0 2px 8px rgba(120,20,35,.15);
  margin-bottom: 0.5rem;
}
.gift-sub {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(1rem, 2vw, 1.2rem);
  font-style: italic;
  color: rgba(90,20,30,.7);
  text-align: center;
  margin-bottom: 2.5rem;
}
.scratch-container {
  display: flex;
  gap: 1.5rem;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 1000px;
  width: 100%;
  position: relative;
  z-index: 2;
}
.scratch-card {
  position: relative;
  width: 280px;
  height: 180px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1);
  background: white;
  border: 2px solid rgba(255,255,255,0.8);
}
.scratch-prize {
  position: absolute; inset: 0;
  padding: 1.5rem;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center;
  background: linear-gradient(135deg, #FBF0D8, #F2E0B5);
  color: var(--wine);
}
.scratch-prize h3 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.3rem;
  font-weight: 600;
  margin-bottom: 0.8rem;
  line-height: 1.2;
}
.scratch-prize p {
  font-family: 'Crimson Pro', serif;
  font-size: 0.95rem;
  line-height: 1.4;
  font-style: italic;
  color: rgba(40,8,14,0.85);
}
.scratch-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  cursor: crosshair;
  touch-action: none;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   RESPONSIVE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:640px){
  .letter-inner,.wish-card{grid-template-columns:1fr!important}
  .photo-slot{display:none}
  .film-frame:last-child{display:none}
  .btn{font-size:.9rem;padding:.5rem 1.3rem}
  .scratch-container { gap: 1rem; }
  .scratch-card { width: 100%; max-width: 320px; height: 160px; }
}
@media(max-width:400px){
  .wish-card{grid-template-columns:1fr!important}
  .cake-col{display:none}
}
</style>
</head>
<body>

<!-- Ambient Magic -->
<div id="ambient-bg"></div>
<div id="magical-dust"></div>
<div id="progress-track"><div id="progress-fill"></div></div>
<div id="counter">01 / 09</div>

<!-- Custom Toast Alert for Greedy Scratches -->
<div id="custom-toast">Hey! I said pick ONE! ðŸ˜‚</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 1 Â· ENVELOPE HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide active" id="s1">

  <div class="envelope-outer stagger" onclick="goTo(1)">
    <div class="env-back"></div>
    <div class="env-card">
      <div class="env-card-text">to my absolute<br>favorite weirdo â™¡</div>
    </div>
    <div class="env-front">
      <div class="fold-left"></div>
      <div class="fold-right"></div>
      <div class="fold-bottom"></div>
    </div>
    <div class="env-flap-container">
      <div class="env-flap-wrap env-flap-inside-wrap">
        <div class="env-flap-inner"></div>
      </div>
      <div class="env-flap-wrap">
        <div class="env-flap-face">
          <div class="seal-wrap"><div class="seal"></div></div>
        </div>
      </div>
    </div>
  </div>

  <h1 class="hero-title stagger">Happiest Birthday to my Kiddo</h1>
  <p class="hero-sub stagger">i made this just for you, so you better appreciate it ðŸ˜¤ (kidding... mostly)</p>

  <div class="btn-row stagger">
    <button class="btn btn-light" onclick="goTo(1)">
      <span class="label">ðŸ“¨ &nbsp;open it already!</span>
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 2 Â· LETTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s2">

  <div class="card letter-card stagger">
    <div class="letter-inner">
      <div>
        <h2 class="letter-heading">hey you &lt;3</h2>
        <p class="letter-body">
          I was trying to write something perfectly poetic and profound, but honestly...<br><br>
          You're just my favorite person to do absolutely nothing with.<br><br>
          Thank you for being my <em>unpaid therapist</em>,<br>
          my <em>treat partner</em>,<br>
          and the <em>friend</em> anyone could ever ask for.
        </p>
      </div>
      <div class="photo-slot">
        <!-- Humanized handwritten placeholder -->
        <span class="handwritten"><img src="2.jpg" alt="Besties photo"></span>
        <br><span style="font-size:0.75rem;opacity:0.5;font-family:sans-serif;margin-top:10px;"></span>
      </div>
    </div>
    <div class="kiss-mark">ðŸ’‹</div>

    <div class="btn-row stagger">
      <button class="back-btn" onclick="goTo(0)">â† back</button>
      <button class="btn btn-parchment" onclick="goTo(2)">
        <span class="label">ðŸŽ‚ &nbsp;now close your eyes and make a wishâ€¦</span>
      </button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 3 Â· MAKE A WISH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s3">

  <div class="card wish-card stagger">
    <div class="cake-col">
      <div class="cake-3d-wrap">
        <div class="cake-shadow"></div>
        <div class="c3d-plate"></div>
        <div class="c3d-tier-base"></div>
        <div class="c3d-tier-top">
          <div class="c3d-frosting"></div>
          <div class="c3d-drips">
            <div class="c3d-drip"></div>
            <div class="c3d-drip"></div>
            <div class="c3d-drip"></div>
            <div class="c3d-drip"></div>
            <div class="c3d-drip"></div>
          </div>
        </div>
        <div class="c3d-candle"></div>
        <div class="c3d-flame" id="flame"></div>
        <div class="c3d-smoke" id="smoke"></div>
      </div>
    </div>
    <div>
      <h2 class="wish-heading">Make a wish!</h2>
      <p class="wish-body">
        Close your eyes. Think of something big.<br>
        (And no, you can't wish for any other boy than me.)<br><br>
        I hope this next year brings you as much joy <br>
        as you bring to everyone around you. <br>
        You deserve the absolute world, and then some.
      </p>
      <div class="btn-row" id="blow-controls" style="margin-top:1.4rem;justify-content:flex-start">
        <button class="back-btn" onclick="goTo(1)" style="position:static;margin-right:.4rem">â† back</button>
        <button class="btn btn-parchment" id="startMicBtn" onclick="initAudio()">
          <span class="label">ðŸŽ™ï¸ &nbsp;blow into mic</span>
        </button>
        <button class="btn btn-light" id="fallbackBlowBtn" style="color:var(--wine); border-color:transparent; font-size:0.9rem;" onclick="blowCandle()">
          <span class="label">or tap here to blow out</span>
        </button>
        <button class="btn btn-light" id="continueBtn" style="display:none; color:var(--wine); border-color:currentColor;" onclick="goTo(3)">
          <span class="label">ðŸŽ‰ &nbsp;see our memoriesâ€¦</span>
        </button>
        <button class="btn btn-light" id="relightBtn" style="display:none; border-color:currentColor; color:var(--gold);" onclick="relightCandle()">
          <span class="label">ðŸ•¯ï¸ &nbsp;relight candle</span>
        </button>
      </div>
      <div id="mic-status" class="handwritten" style="font-size:1.8rem; color:var(--rose); display:none; margin-top:1rem; animation: pulseGlow 1.5s infinite;">
        ðŸŒ¬ï¸ listening... blow into your mic!
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 4 Â· POLAROID MEMORIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s4">

  <div class="section-title stagger">
    <div class="rule">Scrapbook Evidence</div>
  </div>

  <div class="polaroid-row stagger">
    <div class="polaroid">
      <div class="tape tape-1"></div>
      <div class="pol-img">
        <div class="pol-img-inner" style="background:#C4909C">
          <!-- Replace this src with your own image URL! -->
          <img src="IMG_20260227_164001.jpg.jpeg" alt=""deployment issue waitðŸ¥¹">
        </div>
      </div>
      <div class="pol-cap handwritten">
        Wherever we stand, it just feels right. ðŸªžðŸ¤Ž
      </div>
    </div>
    <div class="polaroid">
      <div class="tape tape-2"></div>
      <div class="pol-img">
        <div class="pol-img-inner" style="background:#7A8FA8">
          <!-- Replace this src with your own image URL! -->
          <img src="1.webp" alt="deployment issue waitðŸ¥¹">
        </div>
      </div>
      <div class="pol-cap handwritten">
        Sunlight, smiles, and us â€” thatâ€™s all we needed that day. â˜€ï¸ðŸ¤
      </div>
    </div>
    <div class="polaroid">
      <div class="tape tape-3"></div>
      <div class="pol-img">
        <div class="pol-img-inner" style="background:#C4A078">
          <!-- Replace this src with your own image URL! -->
          <img src="3.jpeg" alt=""deployment issue waitðŸ¥¹">
        </div>
      </div>
      <div class="pol-cap handwritten">
        Not buying anything seriousâ€¦ just collecting little memories together.ðŸ›ï¸âœ¨
      </div>
    </div>
  </div>

  <div class="btn-row stagger">
    <button class="back-btn" style="position:static" onclick="goTo(2)">â† back</button>
    <button class="btn btn-parchment" onclick="goTo(4)">
      <span class="label">ðŸŽ­ &nbsp;okay, wait, I have a surpriseâ€¦</span>
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 5 Â· CURTAIN REVEAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s5" onclick="openCurtain()">
  <div class="curt curt-l"></div>
  <div class="curt curt-r"></div>

  <div class="curt-stage">
    <div class="curt-frame">
      <span class="handwritten" style="color:white; font-size: 1.8rem"><img src="6.jpeg" alt="Main character photo"></span><br>
      <span style="font-size:.8rem;opacity:.6;display:block;margin-top:.4rem; font-family:sans-serif"></span>
    </div>
    <div class="curt-reveal-text">âœ¨ &nbsp;literally the main character &nbsp;âœ¨</div>
    <div class="curt-btns">
      <button class="btn btn-light" onclick="event.stopPropagation(); goTo(5)">
        <span class="label">ðŸ“® &nbsp;I also wrote you a postcardâ€¦</span>
      </button>
    </div>
  </div>

  <div class="click-prompt">â€” tap anywhere to open the curtains â€”</div>

  <button class="back-btn" style="color:rgba(255,255,255,.4)" onclick="event.stopPropagation(); goTo(3)">â† back</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 6 Â· POSTCARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s6">
  <div class="postcard-scene stagger">
    <div class="scene-img">
      <div class="scene-ph-text handwritten" style="font-size: 1.6rem">
        <img src="7.jpeg" alt="Main character photo">
      </div>
      <div class="postcard-note">
        <div class="pc-stamp-box">ðŸŽ€</div>
        <div class="pc-heading">Snail Mail</div>
        <div class="pc-text">
          I know we get busy and don't say it enough, but I cherish every single ridiculous, chaotic, and beautiful moment with you. Here's to surviving another year together! <br>And having a trip together.ðŸ¥‚
        </div>
      </div>
    </div>
  </div>

  <div class="btn-row stagger">
    <button class="back-btn" style="position:static;color:rgba(255,255,255,.4)" onclick="goTo(4)">â† back</button>
    <button class="btn btn-light" onclick="goTo(6)">
      <span class="label">ðŸŽ€ &nbsp;the best part is still comingâ€¦</span>
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 7 Â· THE LONG LETTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s7">
  
  <div class="letter-page-wrap">

    <!-- The paper -->
    <div class="letter-paper stagger">
      <div class="letter-margin"></div>
      <div class="letter-rules"></div>

      <div class="letter-content">

        <!-- Header -->
        <div class="letter-header">
          <div class="letter-ornament lt">âœ¦</div>
          <div class="letter-ornament rt">âœ¦</div>
          <div class="letter-date" id="letterDate"></div>
          <div class="letter-heading-main">A Letter For You</div>
          <div class="letter-sub-head">written from the heart, just for you</div>
        </div>

        <!-- Salutation -->
        <span class="letter-salutation">hey tanvi,</span>

        <!-- Section 1: Main message -->
        <div class="letter-section">
          <div class="letter-section-label">what I want to say</div>
          <div class="letter-field">Happy Birthday to someone who honestly means a lot to meðŸ¥º. Your smile fixes more things than u think. And thank u for always having my back and understanding me even when I donâ€™t say much. It genuinely makes me so happy when u share the little things with me the random updates, the silly moments, even the small details that might not seem important. I love all of it. It reminds me how close we are, how this isnâ€™t just built on big conversations but on the everyday pieces of life we choose to share. Thatâ€™s what makes it special. And sometimes u just stop them allðŸ¤§.  I donâ€™t even know when things changed, but at some point u just became someone I really care about. It wasnâ€™t planned, it wasnâ€™t some big moment, it just slowly happened. Now you pop into my head at random times, and even normal days feel a little different because of u. I care about u in ways I never planned to. I notice the smallest things, the way you speak, the way you react, the way you try to act strong, the way you sometimes overthink. u re perfectly childish for fun conversations and mature enough to understand my emotional side. Somehow you manage to be both, and that balanceðŸ¤ŒðŸ», it means more to me than I can explain. I donâ€™t have perfect words to define what you mean to meðŸ¥º, but I know this, u r usually my first thought in the morning and the last one before I sleep. No matter how messy or tiring the day gets, my mind somehow finds its way back to you. And for the fun part, I genuinely hate it when u say â€œsome other girls are more pretty or anything!â€ Like excuse me?? Are you questioning my taste in women now? ðŸ˜’Because thatâ€™s concerning. Ukw tanvi, the bravest thing Iâ€™ve ever done is sit right next to you and act like I didnâ€™t want to hold your handðŸ¥º. I may say goodbye a thousand times, jokingly, dramatically, casually but letâ€™s be honest. I donâ€™t really know how to leave. And if Iâ€™m being more honest , I donâ€™t even want to. U matter to me more than u realize. And whatever this isâ€¦ it feels natural, it feels right.</div>
        </div>

        <div class="letter-divider"><span>âœ¦</span></div>

        <!-- Section 3: My favourite memories -->
        <div class="letter-section">
          <div class="letter-section-label">my favourite memories with you</div>
          <div class="letter-field">Every memory I make with u is my favourite, honestly I canâ€™t choose between them. But some moments just replay in my head automatically. Like that river rafting in Rishikesh, jumping into that freezing water and still laughing like idiots or that happy Tanvi at 15 AD after getting her sheets checked, that smile was different. And how can I forget coming back to Dehradun from Mussoorie, when u were rubbing my hands just to warm them up. That simple moment felt so comforting. Then that head massage at the hotel lobby, I think that was the closest u have ever been to me, and I still remember how u were sleeping just like a the baby in ur dp. And that whole night at Ganga ghat, pata hi nahi chala kab time pass ho gaya. It didnâ€™t feel long, it just felt right. Every memory weâ€™ve created feels meaningful. Iâ€™m genuinely grateful for you and for all of it and I just hope we keep making more memories like this. With you, time just feels different.</div>
        </div>

        <div class="letter-divider"><span>âœ¦</span></div>

        <!-- Section 4: What I wish for you -->
        <div class="letter-section">
          <div class="letter-section-label">what I wish for you this year</div>
          <div class="letter-field">First of all, please no more upset stomach, enough suffering honestly and . And I genuinely hope some garbage people just quietly uninstall themselves from ur life and never make a comeback. This should be the year you finally defeat DSA, I want to see you solving questions like full villain arc activated instead of them scaring u. Thoda sa overthinking bhi kam ho jaye, because your dimaag deserves rest too and mood swings at least come with a user manual so I know what version Iâ€™m dealing with also ye dusre gadhe kam pareshaan kare aapko so that mai pura kar paauðŸ¥°. I just want your hard work to actually show visible results this time. And selfishly, I just hope Iâ€™m still there, watching you win all of it ðŸ˜Œ</div>
        </div>

        <div class="letter-divider"><span>ðŸŒ¸</span></div>

        <!-- Section 2: Things I love about you -->
        <div class="letter-section">
          <div class="letter-section-label">things I love about you</div>
            <div class="letter-field">I know u have been waiting long thinking, â€œab toh proper answer milegaâ€â€¦<br>
                Guess u will have to wait a little more, because u urself said not on 28 ðŸ˜Œ<br>
                So maybe itâ€™s ur loss or maybe Iâ€™m just making the wait worth it.<br>
                Lowkey though, some answers are better when they r felt, not said.<br>
                Only patient people get the best surprises.<br>
                Very few people can make waiting feel exciting u r one of them.<br>
                Every day I try not to say too much.<br>
                u will understand soon.<br>
                (And hey, donâ€™t take it as pressure, u r still completely free ðŸ¤)
            </div>
        </div>

        <div class="letter-divider"><span>ðŸŒ¸</span></div>

        <!-- Section 5: Free space -->
        <div class="letter-section">
          <div class="letter-section-label">and one last thing</div>
          <div class="letter-field">I am not the person who gives up on u, I won't leave you easily, I'll stay with you, even when you are rude and worse to me you'll find me next to u, I do get angry but my anger melts away, if you are sad & you need me I dont care about how I'm feeling, I just want to make sure you are okay (ik, i fail sometimes on itðŸ« ), because no matter what terms we are on because when I promised you I will never give up on u, i meant it, things may be worse or we not even tolk daily but remember if you need me I'll be there for you, even when you feel worse you can always rely on me, I won't be able to solve your problems but I can surely make you feel better(ik i am also not so good at itðŸ¤§), you will always be special and important to me and I'll always be there for you.</div>
        </div>

        <!-- Closing -->
        <div class="letter-closing">
          <span class="letter-sign-off">Your,</span>
          <div>
            <span class="letter-signature">Dumbo/donkey</span>
          </div>
        </div>

        <!-- Kiss mark -->

      </div><!-- /.letter-content -->
    </div><!-- /.letter-paper -->

  </div><!-- /.letter-page-wrap -->

  <!-- Fixed bottom nav (only visible on this slide) -->
  <div class="letter-nav">
    <button class="back-btn" style="position:static;color:rgba(255,255,255,.4)" onclick="goTo(5)">â† back</button>
    <button class="btn btn-parchment" onclick="goTo(7)">
      <span class="label">ðŸ’ &nbsp;one last look at all our memoriesâ€¦</span>
    </button>
  </div>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 8 Â· FILM STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s8">

  <div class="film-strip stagger">
    <div class="film-frames">
      <div class="film-frame">
        <div class="film-ph" style="background:linear-gradient(135deg,#9A7088,#785068)">
            <span class="handwritten" style="font-size: 1.2rem; color: white;"><img src="Screenshot_20260227_031424.jpg.jpeg" alt="Main character photo"></span>
        </div>
      </div>
      <div class="film-frame">
        <div class="film-ph" style="background:linear-gradient(135deg,#7080A0,#506080)">
            <span class="handwritten" style="font-size: 1.2rem; color: white;"><img src="5.jpeg" alt="Besties photo"></span>
        </div>
      </div>
      <div class="film-frame">
        <div class="film-ph" style="background:linear-gradient(135deg,#A07880,#806060)">
            <span class="handwritten" style="font-size: 1.2rem; color: white;"><img src="4.jpeg" alt="Besties photo"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="ty-headline stagger">ðŸŒ¸ &nbsp;Thank you for existing! &nbsp;ðŸŒ¸</div>
  <p class="ty-sub stagger">my life would be incredibly boring without you</p>

  <div class="btn-row stagger">
    <button class="back-btn" style="position:static" onclick="goTo(6)">â† back</button>
    <button class="btn btn-parchment" onclick="goTo(8)">
      <span class="label">ðŸŽ &nbsp;finally wanna have a bday treat</span>
    </button>
  </div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SLIDE 9 Â· SCRATCH OFF GIFT MINIGAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="slide" id="s9">
  
  <h2 class="gift-title stagger">A Little Birthday Treat</h2>
  <p class="gift-sub stagger">Because you deserve the world. Scratch ONE card to claim your prize! ðŸŽ</p>

  <div class="scratch-container stagger">
    <!-- Ticket 1 -->
    <div class="scratch-card">
      <div class="scratch-prize">
        <h3>The "Yes Day" Dictatorship ðŸ‘‘</h3>
        <p>I have to say YES to literally anything you want for 24 hours. (Please have mercy on my soul).</p>
      </div>
      <canvas class="scratch-canvas" data-id="1"></canvas>
    </div>

    <!-- Ticket 2 -->
    <div class="scratch-card">
      <div class="scratch-prize">
        <h3>The VIP Food Spree ðŸ•ðŸ¤¤</h3>
        <p>You pick the restaurant, order literally whatever you want to eat, and I pretend to not look at the receipt when I pay.</p>
      </div>
      <canvas class="scratch-canvas" data-id="2"></canvas>
    </div>
  </div>

  <!-- THE SNEAKY PEEK BUTTON -->
  <div class="stagger" style="text-align: center; margin-top: 1.5rem; min-height: 40px;">
    <button id="peekBtn" class="btn btn-light" style="display: none; color: var(--wine); border-color: transparent; font-size: 0.95rem;" onclick="revealOthers()">
      <span class="label">ðŸ‘€ sneak a peek at what you missed (nosy)</span>
    </button>
  </div>

  <div class="btn-row stagger" style="margin-top: 1.5rem;">
    <button class="back-btn" style="position:static" onclick="goTo(7)">â† back</button>
    <button class="btn btn-parchment" onclick="confetti(); setTimeout(()=>goTo(0),900)">
      <span class="label">ðŸŽ‰ &nbsp;replay the cringe</span>
    </button>
  </div>

</div>


<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   LETTER PAGE â€” date
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
// Set today's date on the letter
(function(){
  const el = document.getElementById('letterDate');
  if(el){
    const d = new Date();
    el.textContent = d.toLocaleDateString('en-US',{
      weekday:'long', year:'numeric', month:'long', day:'numeric'
    });
  }
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   AMBIENT MAGIC DUST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const dustContainer = document.getElementById('magical-dust');
for(let i=0; i<60; i++){
  const d = document.createElement('div');
  d.className = 'dust';
  const size = 1.5 + Math.random() * 4;
  d.style.width = size + 'px';
  d.style.height = size + 'px';
  d.style.left = Math.random() * 100 + '%';
  d.style.animationDuration = (15 + Math.random() * 25) + 's';
  d.style.animationDelay = (Math.random() * -30) + 's';
  d.style.setProperty('--max-opacity', 0.2 + Math.random() * 0.6);
  dustContainer.appendChild(d);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SLIDE NAVIGATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const slides = document.querySelectorAll('.slide');
const total  = slides.length;
let   current = 0;
let   busy    = false;

function goTo(idx){
  if(idx < 0 || idx >= total || idx === current || busy) return;
  busy = true;

  const prev = slides[current];
  prev.classList.add('exit');
  prev.classList.remove('active');

  setTimeout(()=>{
    prev.classList.remove('exit');
    busy = false;
  }, 450);

  current = idx;
  const next = slides[current];

  // Initialize scratch cards only when visiting the last page for the first time
  if (idx === 8 && !window.scratchesInitialized) {
    window.scratchesInitialized = true;
    setTimeout(initScratchCards, 100);
  }

  // Reset stagger children so they re-animate
  next.querySelectorAll('.stagger').forEach(el=>{
    el.style.transition = 'none';
    el.style.opacity = '0';
    el.style.transform = 'translateY(22px)';
    requestAnimationFrame(()=>{
      requestAnimationFrame(()=>{
        el.style.transition = '';
        el.style.opacity = '';
        el.style.transform = '';
      });
    });
  });

  next.classList.add('active');

  // Reset curtain if navigating away
  if(idx !== 4) document.getElementById('s5').classList.remove('open');

  // Update progress
  const pct = ((current + 1) / total) * 100;
  document.getElementById('progress-fill').style.width = pct + '%';

  // Update counter
  const num = String(current + 1).padStart(2,'0');
  const tot = String(total).padStart(2,'0');
  document.getElementById('counter').textContent = `${num} / ${tot}`;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CURTAIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
function openCurtain(){
  document.getElementById('s5').classList.add('open');
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MICROPHONE BLOW & LOGIC
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
let audioContext;
let analyser;
let micStream;
let micInterval;

async function initAudio() {
  try {
    // Request microphone access
    micStream = await navigator.mediaDevices.getUserMedia({ audio: true });
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioContext.createAnalyser();
    const microphone = audioContext.createMediaStreamSource(micStream);
    
    microphone.connect(analyser);
    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    // Update UI to show listening state
    document.getElementById('startMicBtn').style.display = 'none';
    document.getElementById('fallbackBlowBtn').innerHTML = '<span class="label">too hard? tap here</span>';
    document.getElementById('mic-status').style.display = 'block';

    let blowThresholdCount = 0;

    // Constantly check mic volume levels
    micInterval = setInterval(() => {
      analyser.getByteFrequencyData(dataArray);
      let sum = 0;
      for (let i = 0; i < bufferLength; i++) {
        sum += dataArray[i];
      }
      let average = sum / bufferLength;

      // A steady blow creates white noise that registers as a high average frequency volume
      if (average > 75) { 
        blowThresholdCount++;
        if (blowThresholdCount > 4) { // Ensure they blew continuously for a fraction of a second
          blowCandle();
        }
      } else {
        blowThresholdCount = 0; // reset if volume drops
      }
    }, 100);

  } catch (err) {
    console.error("Mic access denied or failed:", err);
    // Fallback instantly if permission is denied
    document.getElementById('startMicBtn').style.display = 'none';
    const fallback = document.getElementById('fallbackBlowBtn');
    fallback.className = 'btn btn-parchment';
    fallback.style.borderColor = 'currentColor';
    fallback.innerHTML = '<span class="label">ðŸ’¨ &nbsp;blow the candle (tap me)</span>';
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BLOW CANDLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
function blowCandle(){
  const flame = document.getElementById('flame');
  const smoke = document.getElementById('smoke');
  if(flame){
    flame.classList.add('out');
  }
  if(smoke){
    smoke.classList.remove('active');
    // trigger reflow to restart animation
    void smoke.offsetWidth;
    smoke.classList.add('active');
  }

  // Clean up the microphone tracks so the browser recording light goes off
  if (micInterval) clearInterval(micInterval);
  if (micStream) {
    micStream.getTracks().forEach(track => track.stop());
  }
  if (audioContext && audioContext.state !== 'closed') {
    audioContext.close();
  }

  // Update UI for success
  const status = document.getElementById('mic-status');
  if (status) status.style.display = 'none';
  
  const startMicBtn = document.getElementById('startMicBtn');
  if (startMicBtn) startMicBtn.style.display = 'none';

  const fallbackBtn = document.getElementById('fallbackBlowBtn');
  if (fallbackBtn) fallbackBtn.style.display = 'none';

  const continueBtn = document.getElementById('continueBtn');
  if (continueBtn) continueBtn.style.display = 'inline-flex';

  const relightBtn = document.getElementById('relightBtn');
  if (relightBtn) relightBtn.style.display = 'inline-flex';
  
  confetti();
}

function relightCandle() {
  const flame = document.getElementById('flame');
  const smoke = document.getElementById('smoke');
  if(flame) flame.classList.remove('out');
  if(smoke) smoke.classList.remove('active');

  document.getElementById('continueBtn').style.display = 'none';
  document.getElementById('relightBtn').style.display = 'none';

  const startMicBtn = document.getElementById('startMicBtn');
  if (startMicBtn) startMicBtn.style.display = 'inline-flex';

  const fallbackBtn = document.getElementById('fallbackBlowBtn');
  if (fallbackBtn) {
    fallbackBtn.style.display = 'inline-flex';
    fallbackBtn.innerHTML = '<span class="label">or tap here to blow out</span>';
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CONFETTI BURST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
function confetti(){
  const items = ['ðŸŽŠ','ðŸŽ‰','âœ¨','ðŸŒŸ','ðŸ’–','ðŸŽˆ','ðŸŒ¸','ðŸ’•','ðŸŽ€','ðŸ’›','ðŸ©·'];
  for(let i=0;i<40;i++){
    const c = document.createElement('div');
    const delay = Math.random() * .5;
    const dur   = 1.2 + Math.random() * 1.8;
    c.style.cssText = `
      position:fixed;
      left:${10+Math.random()*80}%;
      top:${Math.random()*35}%;
      font-size:${.9+Math.random()*1.4}rem;
      z-index:9997;pointer-events:none;
      animation:cFall ${dur}s cubic-bezier(.25,.46,.45,.94) forwards;
      animation-delay:${delay}s;
      opacity:0;
    `;
    c.textContent = items[Math.floor(Math.random()*items.length)];
    document.body.appendChild(c);
    setTimeout(()=> c.remove(), (dur + delay) * 1000 + 200);
  }
}

/* Confetti keyframe */
const s = document.createElement('style');
s.textContent = `
  @keyframes cFall{
    0%  {transform:translateY(0) rotate(0deg) scale(1.1); opacity:1}
    70% {opacity:.8}
    100%{transform:translateY(220px) rotate(360deg) scale(.2); opacity:0}
  }
`;
document.head.appendChild(s);


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCRATCH-OFF MINIGAME LOGIC
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
function showToast(msg) {
  const toast = document.getElementById('custom-toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 3500);
}

function initScratchCards() {
  const canvases = document.querySelectorAll('.scratch-canvas');
  
  canvases.forEach(canvas => {
    // Hardcoded to match the CSS exactly to prevent resizing bugs during animations
    const cardWidth = 280; 
    const cardHeight = 180;
    
    // Check if on a mobile screen where cards compress to max-width
    const isMobile = window.innerWidth <= 640;
    canvas.width = isMobile ? canvas.parentElement.offsetWidth : cardWidth;
    canvas.height = cardHeight;

    const ctx = canvas.getContext('2d');

    // Create realistic gold gradient
    const grad = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    grad.addColorStop(0, '#CCA850');
    grad.addColorStop(0.5, '#F0E2C8');
    grad.addColorStop(1, '#B8913C');
    
    ctx.fillStyle = grad;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Add some "glitter" texture overlay
    ctx.fillStyle = 'rgba(255,255,255,0.3)';
    for(let i=0; i<40; i++) {
       ctx.beginPath();
       ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, Math.random()*3 + 1, 0, Math.PI*2);
       ctx.fill();
    }

    // Add Scratch prompt text
    ctx.fillStyle = '#5C1120';
    ctx.font = 'italic 1.4rem "Cormorant Garamond", serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('Scratch to reveal âœ¨', canvas.width/2, canvas.height/2);

    let isDrawing = false;

    const scratch = (e) => {
      if (!isDrawing) return;

      const rect = canvas.getBoundingClientRect();
      let clientX = e.clientX;
      let clientY = e.clientY;
      
      if(e.touches && e.touches.length > 0) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      }
      
      const x = clientX - rect.left;
      const y = clientY - rect.top;

      const cardId = canvas.getAttribute('data-id');
      
      // The "Greedy" check: If they started scratching one, lock the others!
      if (window.chosenCardId && window.chosenCardId !== cardId) {
         showToast("Hey! I said pick ONE! ðŸ˜‚");
         isDrawing = false;
         return;
      }
      
      // If this is their first scratch, lock it in and queue the peek button
      if (!window.chosenCardId) {
         window.chosenCardId = cardId;
         setTimeout(() => {
            const peek = document.getElementById('peekBtn');
            if(peek) {
                peek.style.display = 'inline-flex';
                peek.style.animation = 'pulseGlow 2s infinite';
            }
         }, 3000); // Appears after 3 seconds of scratching
      }

      // Erase the gold foil
      ctx.globalCompositeOperation = 'destination-out';
      ctx.beginPath();
      ctx.arc(x, y, 22, 0, Math.PI * 2);
      ctx.fill();
    };

    canvas.addEventListener('mousedown', () => isDrawing = true);
    canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); }, {passive: false});
    
    window.addEventListener('mouseup', () => isDrawing = false);
    window.addEventListener('touchend', () => isDrawing = false);
    
    canvas.addEventListener('mousemove', scratch);
    canvas.addEventListener('touchmove', (e) => { 
      if (isDrawing) { e.preventDefault(); scratch(e); }
    }, {passive: false});
  });
}

// Global function to dissolve the un-scratched cards
window.revealOthers = function() {
    const canvases = document.querySelectorAll('.scratch-canvas');
    canvases.forEach(canvas => {
        if (canvas.getAttribute('data-id') !== window.chosenCardId) {
            canvas.style.transition = 'opacity 1.5s ease-in-out';
            canvas.style.opacity = '0';
            canvas.style.pointerEvents = 'none'; // prevent interacting with them
        }
    });
    
    document.getElementById('peekBtn').style.display = 'none';
    showToast("Curiosity satisfied? You're still stuck with the first one! ðŸ’…âœ¨");
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   KEYBOARD NAVIGATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
document.addEventListener('keydown', e=>{
  if(e.key==='ArrowRight'||e.key==='ArrowDown') goTo(current+1);
  if(e.key==='ArrowLeft'||e.key==='ArrowUp')    goTo(current-1);
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   INIT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
document.getElementById('progress-fill').style.width = (1/total*100)+'%';
</script>
</body>
</html>
